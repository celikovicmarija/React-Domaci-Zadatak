{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Marija\\\\react-weather\\\\src\\\\components\\\\App.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { createMuiTheme, Container, ThemeProvider } from \"@material-ui/core\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Weather from \"./Weather\";\nimport NavBar from \"./NavBar\";\nexport default function App() {\n  const [city, setCity] = useState(\"Eldoret\");\n  const [error, setError] = useState(null);\n  const [currentWeather, setCurrentWeather] = useState({});\n  const [forecast, setForecast] = useState([]);\n  useEffect(() => {\n    getWeather(city).then(weather => {\n      setCurrentWeather(weather);\n      setError(null);\n    }).catch(err => {\n      setError(err.message);\n    });\n  }, [city, error]);\n  useEffect(() => {\n    getForecast(city).then(data => {\n      setForecast(data);\n      setError(null);\n    }).catch(err => {\n      setError(err.message);\n    });\n  }, [city, error]);\n\n  const handleCityChange = city => {\n    setCity(city);\n  };\n\n  const theme = createMuiTheme({\n    typography: {\n      fontFamily: [\"Inter\", \"-apple-system\", \"BlinkMacSystemFont\", '\"Helvetica Neue\"', \"Arial\", \"sans-serif\", '\"Apple Color Emoji\"', '\"Segoe UI Emoji\"', '\"Segoe UI Symbol\"'].join(\",\"),\n      fontSize: 14,\n      h5: {\n        fontWeight: 600\n      }\n    }\n  });\n\n  if (currentWeather && Object.keys(currentWeather).length || forecast && Object.keys(forecast).length) {\n    return /*#__PURE__*/React.createElement(ThemeProvider, {\n      theme: theme,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CssBaseline, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(NavBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      maxWidth: \"sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Weather, {\n      city: city,\n      currentWeather: currentWeather,\n      forecast: forecast,\n      onCityChange: handleCityChange,\n      error: error,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    })));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      color: error ? \"secondary\" : \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }), error ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 18\n      }\n    }, error) : \"\");\n  }\n}\n\nfunction handleResponse(response) {\n  if (response.ok) {\n    return response.json();\n  } else {\n    throw new Error(\"Error: Location \" + response.statusText.toLowerCase());\n  }\n}\n\nfunction getWeather(city) {\n  return fetch(`${process.env.REACT_APP_API_URL}/weather/?q=${city}&units=metric&APPID=${process.env.REACT_APP_API_KEY}`).then(res => handleResponse(res)).then(weather => {\n    if (Object.entries(weather).length) {\n      const mappedData = mapDataToWeatherInterface(weather);\n      return mappedData;\n    }\n  });\n}\n\nfunction getForecast(city) {\n  return fetch(`${process.env.REACT_APP_API_URL}/forecast/?q=${city}&units=metric&APPID=${process.env.REACT_APP_API_KEY}`).then(res => handleResponse(res)).then(forecastData => {\n    if (Object.entries(forecastData).length) {\n      return forecastData.list.filter(forecast => forecast.dt_txt.match(/09:00:00/)).map(mapDataToWeatherInterface);\n    }\n  });\n}\n\nfunction mapDataToWeatherInterface(data) {\n  const mapped = {\n    city: data.name,\n    condition: data.cod,\n    country: data.sys.country,\n    date: data.dt * 1000,\n    description: data.weather[0].description,\n    feels_like: Math.round(data.main.feels_like),\n    humidity: data.main.humidity,\n    icon_id: data.weather[0].id,\n    sunrise: data.sys.sunrise * 1000,\n    sunset: data.sys.sunset * 1000,\n    temperature: Math.round(data.main.temp),\n    timezone: data.timezone / 60,\n    wind_speed: Math.round(data.wind.speed * 3.6) // convert from m/s to km/h\n\n  }; // Add extra properties for the five day forecast: dt_txt, icon, min, max\n\n  if (data.dt_txt) {\n    mapped.dt_txt = data.dt_txt;\n  }\n\n  if (data.weather[0].icon) {\n    mapped.icon = data.weather[0].icon;\n  }\n\n  if (data.main.temp_min && data.main.temp_max) {\n    mapped.max = Math.round(data.main.temp_max);\n    mapped.min = Math.round(data.main.temp_min);\n  } // remove undefined fields\n\n\n  Object.entries(mapped).map(([key, value]) => value === undefined && delete mapped[key]);\n  return mapped;\n}","map":{"version":3,"sources":["C:/Users/Marija/react-weather/src/components/App.js"],"names":["React","useEffect","useState","createMuiTheme","Container","ThemeProvider","CircularProgress","CssBaseline","Weather","NavBar","App","city","setCity","error","setError","currentWeather","setCurrentWeather","forecast","setForecast","getWeather","then","weather","catch","err","message","getForecast","data","handleCityChange","theme","typography","fontFamily","join","fontSize","h5","fontWeight","Object","keys","length","handleResponse","response","ok","json","Error","statusText","toLowerCase","fetch","process","env","REACT_APP_API_URL","REACT_APP_API_KEY","res","entries","mappedData","mapDataToWeatherInterface","forecastData","list","filter","dt_txt","match","map","mapped","name","condition","cod","country","sys","date","dt","description","feels_like","Math","round","main","humidity","icon_id","id","sunrise","sunset","temperature","temp","timezone","wind_speed","wind","speed","icon","temp_min","temp_max","max","min","key","value","undefined"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { createMuiTheme, Container, ThemeProvider } from \"@material-ui/core\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n\r\nimport Weather from \"./Weather\";\r\nimport NavBar from \"./NavBar\";\r\n\r\nexport default function App() {\r\n  const [city, setCity] = useState(\"Eldoret\");\r\n  const [error, setError] = useState(null);\r\n  const [currentWeather, setCurrentWeather] = useState({});\r\n  const [forecast, setForecast] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getWeather(city)\r\n      .then(weather => {\r\n        setCurrentWeather(weather);\r\n        setError(null);\r\n      })\r\n      .catch(err => {\r\n        setError(err.message);\r\n      });\r\n  }, [city, error]);\r\n\r\n  useEffect(() => {\r\n    getForecast(city)\r\n      .then(data => {\r\n        setForecast(data);\r\n        setError(null);\r\n      })\r\n      .catch(err => {\r\n        setError(err.message);\r\n      });\r\n  }, [city, error]);\r\n\r\n  const handleCityChange = city => {\r\n    setCity(city);\r\n  };\r\n\r\n  const theme = createMuiTheme({\r\n    typography: {\r\n      fontFamily: [\r\n        \"Inter\",\r\n        \"-apple-system\",\r\n        \"BlinkMacSystemFont\",\r\n        '\"Helvetica Neue\"',\r\n        \"Arial\",\r\n        \"sans-serif\",\r\n        '\"Apple Color Emoji\"',\r\n        '\"Segoe UI Emoji\"',\r\n        '\"Segoe UI Symbol\"'\r\n      ].join(\",\"),\r\n      fontSize: 14,\r\n      h5: {\r\n        fontWeight: 600\r\n      }\r\n    }\r\n  });\r\n\r\n  if (\r\n    (currentWeather && Object.keys(currentWeather).length) ||\r\n    (forecast && Object.keys(forecast).length)\r\n  ) {\r\n    return (\r\n      <ThemeProvider theme={theme}>\r\n        <CssBaseline />\r\n        <NavBar />\r\n        <Container maxWidth=\"sm\">\r\n          <Weather\r\n            city={city}\r\n            currentWeather={currentWeather}\r\n            forecast={forecast}\r\n            onCityChange={handleCityChange}\r\n            error={error}\r\n          />\r\n        </Container>\r\n      </ThemeProvider>\r\n    );\r\n  } else {\r\n    return (\r\n      <div>\r\n        <CircularProgress color={error ? \"secondary\" : \"primary\"} />\r\n        {error ? <p>{error}</p> : \"\"}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction handleResponse(response) {\r\n  if (response.ok) {\r\n    return response.json();\r\n  } else {\r\n    throw new Error(\"Error: Location \" + response.statusText.toLowerCase());\r\n  }\r\n}\r\n\r\nfunction getWeather(city) {\r\n  return fetch(\r\n    `${process.env.REACT_APP_API_URL}/weather/?q=${city}&units=metric&APPID=${process.env.REACT_APP_API_KEY}`\r\n  )\r\n    .then(res => handleResponse(res))\r\n    .then(weather => {\r\n      if (Object.entries(weather).length) {\r\n        const mappedData = mapDataToWeatherInterface(weather);\r\n        return mappedData;\r\n      }\r\n    });\r\n}\r\n\r\nfunction getForecast(city) {\r\n  return fetch(\r\n    `${process.env.REACT_APP_API_URL}/forecast/?q=${city}&units=metric&APPID=${process.env.REACT_APP_API_KEY}`\r\n  )\r\n    .then(res => handleResponse(res))\r\n    .then(forecastData => {\r\n      if (Object.entries(forecastData).length) {\r\n        return forecastData.list\r\n          .filter(forecast => forecast.dt_txt.match(/09:00:00/))\r\n          .map(mapDataToWeatherInterface);\r\n      }\r\n    });\r\n}\r\n\r\nfunction mapDataToWeatherInterface(data) {\r\n  const mapped = {\r\n    city: data.name,\r\n    condition: data.cod,\r\n    country: data.sys.country,\r\n    date: data.dt * 1000,\r\n    description: data.weather[0].description,\r\n    feels_like: Math.round(data.main.feels_like),\r\n    humidity: data.main.humidity,\r\n    icon_id: data.weather[0].id,\r\n    sunrise: data.sys.sunrise * 1000,\r\n    sunset: data.sys.sunset * 1000,\r\n    temperature: Math.round(data.main.temp),\r\n    timezone: data.timezone / 60,\r\n    wind_speed: Math.round(data.wind.speed * 3.6) // convert from m/s to km/h\r\n  };\r\n\r\n  // Add extra properties for the five day forecast: dt_txt, icon, min, max\r\n  if (data.dt_txt) {\r\n    mapped.dt_txt = data.dt_txt;\r\n  }\r\n\r\n  if (data.weather[0].icon) {\r\n    mapped.icon = data.weather[0].icon;\r\n  }\r\n\r\n  if (data.main.temp_min && data.main.temp_max) {\r\n    mapped.max = Math.round(data.main.temp_max);\r\n    mapped.min = Math.round(data.main.temp_min);\r\n  }\r\n\r\n  // remove undefined fields\r\n  Object.entries(mapped).map(\r\n    ([key, value]) => value === undefined && delete mapped[key]\r\n  );\r\n\r\n  return mapped;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}